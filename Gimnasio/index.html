<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login y Registro de Clientes - Gimnasio</title>

<style>
  body {
    font-family: Arial, sans-serif;
    background: linear-gradient(to right, #dfe9f3, #ffffff);
    padding: 20px;
    color: #333;
  }

  .contenedor {
    max-width: 400px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  }

  input, select, button {
    width: 100%;
    padding: 8px;
    margin-top: 8px;
    border: 1px solid #ccc;
    border-radius: 6px;
    font-size: 14px;
  }

  button {
    background-color: #007bff;
    color: white;
    cursor: pointer;
    transition: 0.3s;
  }

  button:hover {
    background-color: #0056b3;
  }

  table {
    margin-top: 25px;
    width: 100%;
    border-collapse: collapse;
  }

  th, td {
    border: 1px solid #aaa;
    padding: 8px;
    text-align: center;
  }

  th {
    background-color: #007bff;
    color: white;
  }

  .btn-borrar {
    background-color: crimson;
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 5px;
    cursor: pointer;
  }

  .btn-borrar:hover {
    background-color: darkred;
  }

  .btn-salir {
    background-color: darkorange;
    color: white;
    border: none;
    padding: 8px 12px;
    border-radius: 5px;
    cursor: pointer;
    margin-bottom: 15px;
  }

  .btn-salir:hover {
    background-color: #cc7000;
  }

  #paginaGimnasio {
    display: none;
  }
</style>
</head>
<body>

<!-- ================= LOGIN ================= -->
<div id="login" class="contenedor">
  <h2>Inicio de Sesión</h2>
  <p>Ingrese sus credenciales para acceder:</p>

  <label>Usuario:</label>
  <input type="text" id="usuario" placeholder="Ej: admin" required>

  <label>Contraseña:</label>
  <input type="password" id="contrasena" placeholder="Ej: 1234" required>

  <button onclick="iniciarSesion()">Ingresar</button>
</div>

<!-- ================= PÁGINA DEL GIMNASIO ================= -->
<div id="paginaGimnasio">
  <h2>Registro de Clientes - Gimnasio</h2>
  <button class="btn-salir" onclick="cerrarSesion()">Cerrar Sesión</button>

  <form id="formulario">
    <label>Nombre del Cliente:</label>
    <input type="text" id="nombre" required>

    <label>Fecha de Inscripción:</label>
    <input type="date" id="fecha" required>

    <label>Plan:</label>
    <select id="plan" required>
      <option value="">Seleccione un plan</option>
      <option>Elite</option>
      <option>Deportista</option>
      <option>Matinal</option>
    </select>

    <label>Valor del mes ($):</label>
    <input type="number" id="valor" min="0" required>

    <button type="button" onclick="registrar()">Registrar</button>
  </form>

  <table id="tabla">
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Fecha</th>
        <th>Plan</th>
        <th>Valor</th>
        <th>Acción</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<script>
  // =============== LOGIN ===============
  const usuarioValido = "admin";
  const contrasenaValida = "1234";

  document.addEventListener("DOMContentLoaded", () => {
    // Verificar si ya hay sesión activa
    const sesionActiva = localStorage.getItem("sesionActiva");
    if (sesionActiva === "true") {
      mostrarPaginaGimnasio();
    } else {
      mostrarLogin();
    }
  });

  function iniciarSesion() {
    const usuario = document.getElementById("usuario").value;
    const contrasena = document.getElementById("contrasena").value;

    if (usuario === usuarioValido && contrasena === contrasenaValida) {
      localStorage.setItem("sesionActiva", "true");
      mostrarPaginaGimnasio();
    } else {
      alert("Usuario o contraseña incorrectos.");
    }
  }

  function cerrarSesion() {
    localStorage.removeItem("sesionActiva");
    mostrarLogin();
  }

  function mostrarLogin() {
    document.getElementById("login").style.display = "block";
    document.getElementById("paginaGimnasio").style.display = "none";
  }

  function mostrarPaginaGimnasio() {
    document.getElementById("login").style.display = "none";
    document.getElementById("paginaGimnasio").style.display = "block";
    mostrarClientes();
  }

  // =============== REGISTRO DE CLIENTES ===============
  function registrar() {
    const nombre = document.getElementById("nombre").value;
    const fecha = document.getElementById("fecha").value;
    const plan = document.getElementById("plan").value;
    const valor = document.getElementById("valor").value;

    if (!nombre || !fecha || !plan || !valor) {
      alert("Por favor, complete todos los campos.");
      return;
    }

    const cliente = { nombre, fecha, plan, valor };
    let clientes = JSON.parse(localStorage.getItem("clientes")) || [];
    clientes.push(cliente);
    localStorage.setItem("clientes", JSON.stringify(clientes));

    document.getElementById("formulario").reset();
    mostrarClientes();
  }

  function mostrarClientes() {
    const tbody = document.querySelector("#tabla tbody");
    tbody.innerHTML = "";
    const clientes = JSON.parse(localStorage.getItem("clientes")) || [];

    clientes.forEach((c, index) => {
      const fila = document.createElement("tr");
      fila.innerHTML = `
        <td>${c.nombre}</td>
        <td>${c.fecha}</td>
        <td>${c.plan}</td>
        <td>$${c.valor}</td>
        <td><button class="btn-borrar" onclick="borrarCliente(${index})">Eliminar</button></td>
      `;
      tbody.appendChild(fila);
    });
  }

  function borrarCliente(index) {
    let clientes = JSON.parse(localStorage.getItem("clientes")) || [];
    clientes.splice(index, 1);
    localStorage.setItem("clientes", JSON.stringify(clientes));
    mostrarClientes();
  }
</script>

</body>
</html>